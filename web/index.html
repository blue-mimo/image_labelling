<!DOCTYPE html>
<html>
<head>
    <title>Image Labeler</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app"></div>

    <script src="https://unpkg.com/amazon-cognito-identity-js@6.3.12/dist/amazon-cognito-identity.min.js"></script>
    <script src="config.js"></script>
    <script type="module">
        import { initAuth, checkAuth, setupFetchInterceptor } from './js/auth.js';

        if (!window.APP_CONFIG) {
            alert('Configuration not loaded. Please check config.js');
            throw new Error('APP_CONFIG not found');
        }

        window.API_BASE = window.APP_CONFIG.API_BASE;
        window.activeFilters = [];
        window.imagesPerPage = 10;
        window.currentImageUrl = null;
        window.selectedImageName = null;

        const poolData = {
            UserPoolId: window.APP_CONFIG.USER_POOL_ID,
            ClientId: window.APP_CONFIG.USER_POOL_CLIENT_ID
        };

        initAuth(poolData);
        setupFetchInterceptor();
        checkAuth();
    </script>
</body>
</html>
